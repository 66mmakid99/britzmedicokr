---
import BaseLayout from '@layouts/BaseLayout.astro';
import PageHero from '@components/common/PageHero.astro';
import UpdateDate from '@components/common/UpdateDate.astro';
import { getAllPosts } from '@data/blog';
import { formatDateKo } from '@lib/utils';

const posts = getAllPosts();

const categories = [
  { key: 'all', label: '전체' },
  { key: 'rf-guide', label: 'RF 기술 가이드' },
  { key: 'treatment', label: '시술 정보' },
  { key: 'clinical', label: '임상 데이터' },
  { key: 'news', label: '회사 소식' },
];

const categoryColors: Record<string, string> = {
  'rf-guide': 'bg-zinc-100 text-zinc-400',
  treatment: 'bg-zinc-100 text-zinc-700',
  clinical: 'bg-zinc-100 text-zinc-700',
  news: 'bg-zinc-100 text-zinc-700',
};
---

<BaseLayout
  title="브리츠메디 블로그 — RF 기술과 피부 미용의 모든 것"
  description="RF 리프팅 기술 가이드, 피부 미용 시술 비교, 임상 데이터, 브리츠메디 최신 소식을 확인하세요."
>
  <PageHero
    title="브리츠메디 블로그 — RF 기술과 피부 미용의 모든 것"
    breadcrumb={[{ name: '블로그', href: '/blog' }]}
  />

  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8">
    <p class="mb-8 text-lg text-zinc-600">
      토로이달 RF 기술, 피부 리프팅 시술 비교, 임상 결과, 브리츠메디 최신 뉴스까지. 전문 콘텐츠를 통해 의료기기와 피부 미용의 모든 것을 알아보세요.
    </p>

    <!-- 카테고리 필터 -->
    <div class="mb-10 flex flex-wrap gap-2">
      {categories.map((cat) => (
        <button
          type="button"
          class:list={[
            'rounded-full px-4 py-2 text-sm font-medium transition-colors',
            cat.key === 'all'
              ? 'bg-zinc-900 text-white'
              : 'bg-zinc-100 text-zinc-600 hover:bg-zinc-200',
          ]}
        >
          {cat.label}
        </button>
      ))}
    </div>

    <!-- 블로그 카드 목록 -->
    <div class="grid gap-8 md:grid-cols-3">
      {posts.map((post) => (
        <a
          href={`/blog/${post.slug}`}
          class="group flex flex-col rounded-2xl border border-zinc-100 bg-white transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg"
        >
          <div class="flex h-48 items-center justify-center rounded-t-2xl bg-zinc-100">
            <svg class="h-10 w-10 text-zinc-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
          </div>
          <div class="flex flex-1 flex-col p-6">
            <div class="mb-3 flex items-center gap-2">
              <span
                class:list={[
                  'inline-block rounded-full px-3 py-1 text-xs font-semibold',
                  categoryColors[post.category] ?? 'bg-zinc-100 text-zinc-700',
                ]}
              >
                {post.categoryLabel}
              </span>
              <span class="text-xs text-zinc-500">{formatDateKo(post.publishedAt)}</span>
            </div>

            <h2 class="mb-3 text-lg font-bold text-zinc-900 group-hover:text-zinc-400 leading-snug">
              {post.title}
            </h2>

            <p class="mb-4 line-clamp-3 flex-1 text-sm text-zinc-600 leading-relaxed">
              {post.excerpt}
            </p>

            <span class="mt-auto inline-flex items-center text-sm font-semibold text-zinc-400">
              자세히 보기
              <svg class="ml-1 h-4 w-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </span>
          </div>
        </a>
      ))}
    </div>

    <UpdateDate />
  </div>
</BaseLayout>
