---
import BaseLayout from '@layouts/BaseLayout.astro';
import PageHero from '@components/common/PageHero.astro';
import UpdateDate from '@components/common/UpdateDate.astro';
import { getAllPosts } from '@data/blog';
import { formatDateKo } from '@lib/utils';

const posts = getAllPosts();

const categories = [
  { key: 'all', label: 'ì „ì²´' },
  { key: 'rf-guide', label: 'RF ê¸°ìˆ  ê°€ì´ë“œ' },
  { key: 'treatment', label: 'ì‹œìˆ  ì •ë³´' },
  { key: 'clinical', label: 'ì„ìƒ ë°ì´í„°' },
  { key: 'news', label: 'íšŒì‚¬ ì†Œì‹' },
];

const categoryColors: Record<string, string> = {
  'rf-guide': 'bg-blue-100 text-blue-700',
  treatment: 'bg-emerald-100 text-emerald-700',
  clinical: 'bg-purple-100 text-purple-700',
  news: 'bg-orange-100 text-orange-700',
};
---

<BaseLayout
  title="ë¸Œë¦¬ì¸ ë©”ë”” ë¸”ë¡œê·¸ â€” RF ê¸°ìˆ ê³¼ í”¼ë¶€ ë¯¸ìš©ì˜ ëª¨ë“  ê²ƒ"
  description="RF ë¦¬í”„íŒ… ê¸°ìˆ  ê°€ì´ë“œ, í”¼ë¶€ ë¯¸ìš© ì‹œìˆ  ë¹„êµ, ì„ìƒ ë°ì´í„°, ë¸Œë¦¬ì¸ ë©”ë”” ìµœì‹  ì†Œì‹ì„ í™•ì¸í•˜ì„¸ìš”."
>
  <PageHero
    title="ë¸Œë¦¬ì¸ ë©”ë”” ë¸”ë¡œê·¸ â€” RF ê¸°ìˆ ê³¼ í”¼ë¶€ ë¯¸ìš©ì˜ ëª¨ë“  ê²ƒ"
    breadcrumb={[{ name: 'ë¸”ë¡œê·¸', href: '/blog' }]}
  />

  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8">
    <p class="mb-8 text-lg text-slate-600">
      í† ë¡œì´ë‹¬ RF ê¸°ìˆ , í”¼ë¶€ ë¦¬í”„íŒ… ì‹œìˆ  ë¹„êµ, ì„ìƒ ê²°ê³¼, ë¸Œë¦¬ì¸ ë©”ë”” ìµœì‹  ë‰´ìŠ¤ê¹Œì§€. ì „ë¬¸ ì½˜í…ì¸ ë¥¼ í†µí•´ ì˜ë£Œê¸°ê¸°ì™€ í”¼ë¶€ ë¯¸ìš©ì˜ ëª¨ë“  ê²ƒì„ ì•Œì•„ë³´ì„¸ìš”.
    </p>

    <!-- ì¹´í…Œê³ ë¦¬ í•„í„° -->
    <div class="mb-10 flex flex-wrap gap-2">
      {categories.map((cat) => (
        <button
          type="button"
          class:list={[
            'rounded-full px-4 py-2 text-sm font-medium transition-colors',
            cat.key === 'all'
              ? 'bg-slate-900 text-white'
              : 'bg-slate-100 text-slate-600 hover:bg-slate-200',
          ]}
        >
          {cat.label}
        </button>
      ))}
    </div>

    <!-- ë¸”ë¡œê·¸ ì¹´ë“œ ëª©ë¡ -->
    <div class="grid gap-8 md:grid-cols-3">
      {posts.map((post) => (
        <a
          href={`/blog/${post.slug}`}
          class="group flex flex-col rounded-2xl border border-slate-100 bg-white transition-all duration-300 hover:-translate-y-0.5 hover:shadow-lg"
        >
          <div class="flex h-48 items-center justify-center rounded-t-2xl bg-slate-100">
            <span class="text-4xl text-slate-300">ğŸ“</span>
          </div>
          <div class="flex flex-1 flex-col p-6">
            <div class="mb-3 flex items-center gap-2">
              <span
                class:list={[
                  'inline-block rounded-full px-3 py-1 text-xs font-semibold',
                  categoryColors[post.category] ?? 'bg-slate-100 text-slate-700',
                ]}
              >
                {post.categoryLabel}
              </span>
              <span class="text-xs text-slate-500">{formatDateKo(post.publishedAt)}</span>
            </div>

            <h2 class="mb-3 text-lg font-bold text-slate-900 group-hover:text-blue-700 leading-snug">
              {post.title}
            </h2>

            <p class="mb-4 line-clamp-3 flex-1 text-sm text-slate-600 leading-relaxed">
              {post.excerpt}
            </p>

            <span class="mt-auto inline-flex items-center text-sm font-semibold text-blue-600">
              ìì„¸íˆ ë³´ê¸°
              <svg class="ml-1 h-4 w-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </span>
          </div>
        </a>
      ))}
    </div>

    <UpdateDate />
  </div>
</BaseLayout>
