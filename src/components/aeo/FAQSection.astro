---
import SchemaOrg from './SchemaOrg.astro';
import { faqSchema } from '@lib/schema';

interface Props {
  items: { question: string; answer: string }[];
  schemaEnabled?: boolean;
}

const { items, schemaEnabled = true } = Astro.props;
---

<section class="my-12">
  <h2 class="mb-6 text-2xl font-bold text-zinc-900 md:text-3xl">자주 묻는 질문</h2>
  <div class="divide-y divide-zinc-200">
    {items.map((item, i) => (
      <details class="group" open={i === 0}>
        <summary class="flex cursor-pointer items-center justify-between py-5 text-left font-semibold text-zinc-900 transition-colors hover:text-zinc-400">
          <span>{item.question}</span>
          <svg class="h-5 w-5 shrink-0 text-zinc-400 transition-transform group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </summary>
        <div class="pb-5 leading-relaxed text-zinc-600">
          {item.answer}
        </div>
      </details>
    ))}
  </div>
</section>

{schemaEnabled && <SchemaOrg schema={faqSchema(items)} />}
