---
import BaseLayout from '@layouts/BaseLayout.astro';
import Breadcrumb from '@components/common/Breadcrumb.astro';
import AuthorInfo from '@components/aeo/AuthorInfo.astro';
import { formatDateKo } from '@lib/utils';

interface Props {
  title: string;
  description: string;
  author?: string;
  publishedAt?: string;
  category?: string;
  categoryHref?: string;
}

const {
  title,
  description,
  author = '브리츠메디 연구소',
  publishedAt,
  category,
  categoryHref = '/blog',
} = Astro.props;

const breadcrumbItems = [{ name: '블로그', href: '/blog' }];
if (category) {
  breadcrumbItems.push({ name: category, href: categoryHref });
}
---

<BaseLayout title={title} description={description}>
  <slot name="head" slot="head" />

  <!-- 에디토리얼 헤더 -->
  <section class="border-b border-zinc-100 bg-white px-4 pt-32 pb-10 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-3xl">
      <Breadcrumb items={breadcrumbItems} />
      <div class="flex flex-wrap items-center gap-2">
        {category && (
          <span class="rounded-full bg-teal-50 px-3 py-1 text-xs font-medium text-teal-700">{category}</span>
        )}
      </div>
      <h1 class="mt-4 text-3xl font-bold tracking-tight text-zinc-900 md:text-4xl lg:text-[2.75rem] lg:leading-[1.15]">
        {title}
      </h1>
      <div class="mt-4 flex items-center gap-3 text-sm text-zinc-400">
        <span>{author}</span>
        {publishedAt && (
          <>
            <span class="text-zinc-300">·</span>
            <time datetime={publishedAt}>{formatDateKo(publishedAt)}</time>
          </>
        )}
      </div>
    </div>
  </section>

  <!-- 대표 이미지 영역 -->
  <div class="mx-auto max-w-4xl px-4 pt-10 sm:px-6 lg:px-8">
    <div class="flex h-64 items-center justify-center rounded-2xl bg-zinc-100 md:h-96">
      <svg class="h-12 w-12 text-zinc-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909M3.75 21h16.5A2.25 2.25 0 0022.5 18.75V5.25A2.25 2.25 0 0020.25 3H3.75A2.25 2.25 0 001.5 5.25v13.5A2.25 2.25 0 003.75 21z" />
      </svg>
    </div>
  </div>

  <!-- 본문 -->
  <div class="mx-auto max-w-3xl px-4 py-12 sm:px-6 lg:px-8">
    <article>
      <slot />
    </article>

    <div class="mt-12 border-t border-zinc-100 pt-8">
      <AuthorInfo name={author} role="Content Author" />
    </div>
  </div>
</BaseLayout>
